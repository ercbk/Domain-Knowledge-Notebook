<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Domain Knowledge - Marketing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../qmd/meteorology.html" rel="next">
<link href="../qmd/manufacturing.html" rel="prev">
<link href="../images/dk-favicon-32.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../qmd/marketing.html">Marketing</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Domain Knowledge</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://ericbook.netlify.app/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-house-fill"></i></a>
    <a href="https://github.com/ercbk/Domain-Knowledge-Notebook" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/agriculture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Agriculture</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/banking-credit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Banking/Credit</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/budget-allocation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Budget Allocation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/economics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Economics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/environment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Environment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/epidemiology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Epidemiology</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Finance</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/finance-glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/finance-investing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Investing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/finance-risk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Risk</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/finance-snippets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Snippets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/finance-valuation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Valuation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/healthcare.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Healthcare</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/insurance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Insurance</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/kpis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">KPIs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/location-selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Location Selection</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Logistics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/logistics-demand-planning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Demand Planning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/logistics-inventory-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Inventory Management</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/logistics-supply-chain.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Supply Chain</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/low-hanging-fruit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Low Hanging Fruit</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/manufacturing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Manufacturing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/marketing.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Marketing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/meteorology.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Meteorology</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/nonprofits.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Nonprofits</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/politics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Politics</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Product Development</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/product-development-general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">General</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/product-development-kpis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">KPIs</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/real-estate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Real Estate</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/retail.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Retail</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/saas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SaaS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../qmd/sports-betting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sports Betting</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-mark-misc" id="toc-sec-mark-misc" class="nav-link active" data-scroll-target="#sec-mark-misc">Misc</a></li>
  <li><a href="#sec-mark-terms" id="toc-sec-mark-terms" class="nav-link" data-scroll-target="#sec-mark-terms">Terms</a></li>
  <li><a href="#sec-mark-usecases" id="toc-sec-mark-usecases" class="nav-link" data-scroll-target="#sec-mark-usecases">Use Cases</a></li>
  <li><a href="#sec-mark-metrics" id="toc-sec-mark-metrics" class="nav-link" data-scroll-target="#sec-mark-metrics">Metrics</a></li>
  <li><a href="#sec-mark-custlift" id="toc-sec-mark-custlift" class="nav-link" data-scroll-target="#sec-mark-custlift">Conversion Lift Tests</a></li>
  <li><a href="#sec-mark-geoexp" id="toc-sec-mark-geoexp" class="nav-link" data-scroll-target="#sec-mark-geoexp">Geo-Experiments</a></li>
  <li><a href="#sec-mark-long" id="toc-sec-mark-long" class="nav-link" data-scroll-target="#sec-mark-long">Longitudinal Experiments</a></li>
  <li><a href="#sec-mark-chanatt" id="toc-sec-mark-chanatt" class="nav-link" data-scroll-target="#sec-mark-chanatt">Channel Attribution</a>
  <ul>
  <li><a href="#sec-mark-chanatt-misc" id="toc-sec-mark-chanatt-misc" class="nav-link" data-scroll-target="#sec-mark-chanatt-misc">Misc</a></li>
  <li><a href="#sec-mark-chanatt-unif" id="toc-sec-mark-chanatt-unif" class="nav-link" data-scroll-target="#sec-mark-chanatt-unif">Unified Approach</a></li>
  <li><a href="#sec-mark-chanatt-mmm" id="toc-sec-mark-chanatt-mmm" class="nav-link" data-scroll-target="#sec-mark-chanatt-mmm">Marketing Mix Modeling (MMM)</a></li>
  <li><a href="#sec-mark-chanatt-mta" id="toc-sec-mark-chanatt-mta" class="nav-link" data-scroll-target="#sec-mark-chanatt-mta">Multi-Touch Attribution Modeling (MTA)</a></li>
  <li><a href="#sec-mark-chanatt-mca" id="toc-sec-mark-chanatt-mca" class="nav-link" data-scroll-target="#sec-mark-chanatt-mca">Mobile Channel Attribution</a></li>
  </ul></li>
  <li><a href="#sec-mark-sem" id="toc-sec-mark-sem" class="nav-link" data-scroll-target="#sec-mark-sem">Search Engine Marketing (SEM)</a></li>
  <li><a href="#sec-mark-custseg" id="toc-sec-mark-custseg" class="nav-link" data-scroll-target="#sec-mark-custseg">Customer Segmentation</a>
  <ul>
  <li><a href="#sec-mark-custseg-misc" id="toc-sec-mark-custseg-misc" class="nav-link" data-scroll-target="#sec-mark-custseg-misc">Misc</a></li>
  <li><a href="#sec-mark-custseg-proc" id="toc-sec-mark-custseg-proc" class="nav-link" data-scroll-target="#sec-mark-custseg-proc">Process</a></li>
  <li><a href="#sec-mark-custseg-rfm" id="toc-sec-mark-custseg-rfm" class="nav-link" data-scroll-target="#sec-mark-custseg-rfm">RFM Analysis</a>
  <ul>
  <li><a href="#sec-mark-custseg-rfm-dat" id="toc-sec-mark-custseg-rfm-dat" class="nav-link" data-scroll-target="#sec-mark-custseg-rfm-dat">Data</a></li>
  <li><a href="#sec-mark-custseg-rfm-mod" id="toc-sec-mark-custseg-rfm-mod" class="nav-link" data-scroll-target="#sec-mark-custseg-rfm-mod">Modeling</a></li>
  </ul></li>
  <li><a href="#sec-mark-custseg-behav" id="toc-sec-mark-custseg-behav" class="nav-link" data-scroll-target="#sec-mark-custseg-behav">Behavioral Segmentation</a></li>
  </ul></li>
  <li><a href="#sec-mark-custjourn" id="toc-sec-mark-custjourn" class="nav-link" data-scroll-target="#sec-mark-custjourn">Customer Journey</a></li>
  <li><a href="#sec-mark-wkflw" id="toc-sec-mark-wkflw" class="nav-link" data-scroll-target="#sec-mark-wkflw">Workflow</a>
  <ul>
  <li><a href="#sec-mark-wkflw-icp" id="toc-sec-mark-wkflw-icp" class="nav-link" data-scroll-target="#sec-mark-wkflw-icp">Find the Ideal Customer Profile (ICP) and Target Them</a></li>
  <li><a href="#sec-mark-wkflw-pits" id="toc-sec-mark-wkflw-pits" class="nav-link" data-scroll-target="#sec-mark-wkflw-pits">Potential Pitfalls</a></li>
  <li><a href="#sec-mark-wkflw-refbizq" id="toc-sec-mark-wkflw-refbizq" class="nav-link" data-scroll-target="#sec-mark-wkflw-refbizq">Refine the Business Question</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-mark" class="quarto-section-identifier">Marketing</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-mark-misc" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-misc">Misc</h2>
<ul>
<li>Notes from
<ul>
<li><a href="https://hbr.org/2021/07/why-you-arent-getting-more-from-your-marketing-ai?ab=seriesnav-spotlight" class="uri">https://hbr.org/2021/07/why-you-arent-getting-more-from-your-marketing-ai?ab=seriesnav-spotlight</a></li>
<li><a href="https://hbr.org/2021/07/how-to-design-an-ai-marketing-strategy?utm_source=Data_Elixir&amp;utm_medium=social" class="uri">https://hbr.org/2021/07/how-to-design-an-ai-marketing-strategy?utm_source=Data_Elixir&amp;utm_medium=social</a></li>
</ul></li>
<li>Most marketing AI addresses segmentation, targeting, and budget allocation.</li>
<li>Tools to engage customers: Salesforce, Marketo, Braze, Facebook Ads, or Google Ads
<ul>
<li>Google and Facebook are perennially at the <a href="https://www.singular.net/blog/singular-roi-index-2020-blog/">top of charts for highest return on ad spend</a>
<ul>
<li>www.singular.net may be useful resource to check from year to year</li>
</ul></li>
<li><span class="ribbon-highlight">Example</span>: run a Facebook Ad campaign for these at-risk customers
<ul>
<li>Manual: Create a SQL query, pull a list from the data warehouse, download it to CSV, and upload it into Facebook Ads or build an integration</li>
<li>Automate:
<ul>
<li>Reverse ETL
<ul>
<li>I think this process is described in the “Manual” part (above)</li>
</ul></li>
<li>Platforms: Flywheel</li>
</ul></li>
</ul></li>
</ul></li>
<li>Facebook enables smart mobile user acquisition for mobile brands with 2 methods:
<ul>
<li>App Event Optimization (AEO)
<ul>
<li>Looks for new-to-you people who are similar to customers you already have in your apps at defined stages</li>
</ul></li>
<li>Value Optimization (VO)
<ul>
<li>Looks for people who will spend a certain amount of money in your mobile app</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-mark-terms" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-terms">Terms</h2>
<ul>
<li><p><span style="color: #009499"><strong>Action-Based</strong></span> - Clicks, impressions, and GRP data</p></li>
<li><p><span style="color: #009499"><strong>Adstock</strong></span> - An average decaying function for the carryover effect (see Channel Attribution section)</p></li>
<li><p><span style="color: #009499"><strong>Advanced Mobile Measurement (AMM)</strong></span> - Facebook’s tracker. Allowed advertisers to access click-through conversion data through their MMP</p></li>
<li><p><span style="color: #009499"><strong>Affiliate marketing</strong></span> - A type of performance-based marketing in which a business rewards one or more affiliates for each visitor or customer brought by the affiliate’s own marketing efforts.</p></li>
<li><p><span style="color: #009499"><strong>Carryover Effect</strong></span> - The lag between the time a consumer is touched by an ad and the time a consumer converts because of the ad</p></li>
<li><p><span style="color: #009499"><strong>Click-in</strong></span> - When a user click on something to reach your website/app</p></li>
<li><p><span style="color: #009499"><strong>Click-out</strong></span> - The last click a user makes that take them to another website/app</p></li>
<li><p><span style="color: #009499"><strong>Clearing Price</strong></span> - The final price paid for an impression.</p></li>
<li><p><span style="color: #009499"><strong>CPC</strong></span> - Cost Per Click - refers to the cost an advertiser pays each time an online user clicks on his or her digital ad</p></li>
<li><p><span style="color: #009499"><strong>CPM</strong></span> - Cost Per Thousand Impressions is the amount <em>advertisers</em> are willing to pay for every one thousand impressions they receive</p>
<p><span class="math display">\[
CPM = \frac{\text{Campaign Budget} \cdot 1000}{\text{Number of Desired Impressions}}
\]</span></p></li>
<li><p><span style="color: #009499"><strong>eCPM</strong></span> or effective CPM is the predicted revenue earned by a <em>publisher</em> for every one thousand impressions; metric for ad testing</p>
<p><span class="math display">\[
eCPM = \frac{\mbox{Estimated Earnings} \cdot 1000}{\mbox{Total Impressions}}
\]</span></p>
<ul>
<li>Factors that affect eCPM (for all, more is better)
<ul>
<li>Monthly website traffic</li>
<li>Number of ad networks
<ul>
<li>Find ad networks offering better deals](https://www.adpushup.com/blog/the-best-ad-networks-for-publishers/) for different geographical locations</li>
</ul></li>
<li>Viewability Score
<ul>
<li>Multiple links in this <a href="https://www.adpushup.com/blog/what-is-ecpm/">article</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><p><span style="color: #009499"><strong>Floor prices</strong></span> - Are traditionally used by publishers to increase the closing price of their auctions. Think these are implemented by publishers with second-price auctions when they feel reductions are too large.</p></li>
<li><p><span style="color: #009499"><strong>GRP</strong></span> - Gross Rating Point. A standard measure in advertising, it measures advertising impact.</p>
<ul>
<li>One GRP is one percent of all potential adult television viewers (or in radio, listeners) in a market</li>
<li>Calculatations:
<ul>
<li><p>Percent of the Target-Market-Reached multiplied by the Exposure Frequency.</p>
<p><span class="math display">\[
\begin{align}
&amp;GRP (\%) = \frac{100 \cdot \mbox{Impressions} \;(\#)}{\mbox{Defined Population}\; (\#)} \\
&amp;GRP (\%) = 100 \cdot \mbox{Reach}\; (\%) \cdot \mbox{Average Frequency}\; (\#)
\end{align}
\]</span></p></li>
<li><p><span class="ribbon-highlight">Examples</span>:</p>
<ul>
<li>if you get advertise to 30% of the target market and give them 4 exposures, you would have 120 GRP.</li>
<li>If an average of 12% of the people view each episode of a television program, and an ad is placed on 5 episodes, then the campaign has 12 × 5 = 60 GRPs.</li>
<li>If 50% view three episodes, that’s 150 GRPs</li>
</ul></li>
</ul></li>
</ul></li>
<li><p><span style="color: #009499"><strong>Header Bidding</strong></span> - Just the name for technical auctioning process behind bidding on ad space on a website.</p>
<ul>
<li>Used to be done by waterfall archetecture where ads would pass from one publisher’s website to another until it reached one with a price floor that was below the advertiser’s bidding price</li>
</ul></li>
<li><p><span style="color: #009499"><strong>Ideal customer profile (ICP)</strong></span> - Customers who bring in the most long-term value for a company</p></li>
<li><p><span style="color: #009499"><strong>Identifier for Advertisers (IDFA)</strong></span> - a random device identifier assigned by Apple to a user’s device. Advertisers use them to precisely target and track users within apps on iOS devices</p></li>
<li><p><span style="color: #009499"><strong>Impression</strong></span> - An instance of each time your ad is shown on a search result page or other site on the Google Network. (i.e.&nbsp;number of people your ad reaches)</p>
<ul>
<li>Each time your ad appears on Google or the Google Network, it’s counted as one impression.</li>
<li>In some cases, only a section of your ad may be shown. For example, in Google Maps, we may show only your business name and location or only your business name and the first line of your ad text.</li>
<li>You’ll sometimes see the abbreviation “Impr” in your account showing the number of impressions for your ad.</li>
</ul></li>
<li><p><span style="color: #009499"><strong>Inventory</strong></span> - the amount of ad space (or the number of advertisements) that a publisher has available to sell. While the term originated from print, it has grown to encompass ad space on the web and on apps and mobile ads</p></li>
<li><p><span style="color: #009499"><strong>Price Floor</strong></span> - The minimum price a publisher will accept for its inventory — ignoring all bids below that price.</p></li>
<li><p><span style="color: #009499"><strong>Reduction</strong></span> - Money saved in a second-price auction; difference between the bid price and the clearing price</p></li>
<li><p><span style="color: #009499"><strong>RPM</strong></span> - similar to eCPM; it’s the amount earned by <em>publishers</em> per thousand pageviews</p></li>
<li><p><span style="color: #009499"><strong>Touchpoint</strong></span> - any time a potential customer or customer comes in contact with your brand–before, during, or after they purchase something from you. Interactions with marketing campaigns and the home page provide rich information about who they are and what they like</p>
<ul>
<li><span class="ribbon-highlight">Examples</span>:
<ul>
<li>Before Purchase: Social media, Ratings and reviews, Testimonials, Word of mouth, Community involvement, Advertising, Marketing/PR, visits your website</li>
<li>During Purchase: Store or office, Website, Catalog, Promotions, Staff or sales team, Phone system, Point of sale</li>
<li>Post Purchase: Billing, Transactional emails, Marketing emails, Service and support teams, Online help center, Follow ups, Thank you cards</li>
</ul></li>
</ul></li>
<li><p><span style="color: #009499"><strong>UTM</strong></span> - Urchin Traffic Monitor - used to identify marketing channels or results from ad campaigns</p>
<ul>
<li>Name comes from Urchin Tracker, a web analytics software that served as the base for Google Analytics.</li>
<li>e.g.&nbsp;http://yourwebsite.com/your-post-title/?utm_source=google
<ul>
<li>utm code = string after “?”
<ul>
<li>separate each UTM parameter with the ‘&amp;’ sign.</li>
</ul></li>
<li>This person clicked a google ad to get to your site</li>
</ul></li>
<li>Google URL builder <a href="https://ga-dev-tools.appspot.com/campaign-url-builder/">tool</a></li>
<li>See <a href="https://agencyanalytics.com/blog/utm-tracking">article</a> for me details, best practices, etc.</li>
<li>Parameter types
<ul>
<li>utm_source - traffic source (e.g.&nbsp;google, facebook, twitter, etc.)</li>
<li>utm_medium - type of traffic source (e.g.&nbsp;CPC, email, social, referral, display, etc.)</li>
<li>utm_campaign - campaign name, track the performance of a specific campaign</li>
<li>utm___content - In case you have multiple links pointing to the same URL (such as an email with two CTA buttons), this code will help you track which link was clicked (e.g <code>utm_content=navlink</code> )</li>
<li>utm_term - track which keyword term a website visitor came from. This parameter is specifically used for paid search ads. (e.g.&nbsp;<code>utm_term=growth+hacking+tactics</code>)</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-mark-usecases" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-usecases">Use Cases</h2>
<ul>
<li>Chatbots for lead development, customer support, and cross-selling or upselling</li>
<li>Inbound call analysis and routing, and customer comment and email analysis, classification, and response</li>
<li>Marketing campaign automation (including emails, landing page generation, and customer segmentation)</li>
<li>Channel Attribution
<ul>
<li>Marketing mix modeling (MMM)</li>
<li>Multi-touch Attribution Modeling (MTA)</li>
<li>Unified Approach Online product merchandising</li>
</ul></li>
<li>Pricing Product or service recommendations and highly personalized offers</li>
<li>Programmatic digital ad buying (&nbsp;digital ads are served up almost instantaneously to users)</li>
<li>Sales lead scoring</li>
<li>Social-media planning, buying, and execution</li>
<li>Social-media sentiment analysis</li>
<li>Television ad placement (partial)</li>
<li>Web analytics narrative generation</li>
<li>Website operation and optimization (including testing)</li>
<li>Sales propensity models in customer relationship management (CRM) systems</li>
<li>Automated Tasks
<ul>
<li>Send a welcome email to each new customer</li>
<li>Chatbots on social media platforms
<ul>
<li>Start with a stand-alone non-customer-facing task-automation app, such as one that guides human service agents who engage with customers.
<ul>
<li>Less-capable bots can irritate customers. It may be better to have such bots assist human agents or advisers rather than interact with customers.</li>
</ul></li>
</ul></li>
<li>Once companies acquire basic AI skills and an abundance of customer and market data, they can start moving from task automation to machine learning</li>
</ul></li>
<li>Apps
<ul>
<li>Stand-alone applications continue to have their place where integration is difficult or impossible, though there are limits to their benefits.</li>
<li>Example
<ul>
<li>Using IBM Watson’s natural language processing and Tone Analyzer capabilities (which detect emotions in text), the application delivers several personalized Behr paint-color recommendations that are based on the mood consumers desire for their space. Customers use the app to short-list two or three colors for the room they intend to paint.</li>
</ul></li>
</ul></li>
<li>Integrated ML/DL
<ul>
<li>Netflix - recommendations are on a separate standalone app where the customer needs to request recommendations</li>
<li>ML that coaches a customer service rep through a call</li>
</ul></li>
</ul>
</section>
<section id="sec-mark-metrics" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-metrics">Metrics</h2>
<ul>
<li><p>Conversion Rates, Bounce Rates, and Average Basket Sizes</p></li>
<li><p><strong>Customer Acquistion Cost (CAC)</strong><br>
<span class="math display">\[
\mbox{CAC} = \frac{\mbox{Sales and Marketing Expenses}}{\mbox{Number of New Customers Acquired}}
\]</span></p>
<ul>
<li><p>Common Expenses</p>
<ul>
<li><p>Employee Salaries (i.e.&nbsp;Sales and Marketing Team)</p></li>
<li><p>Ad Spend and Marketing Campaigns (e.g.&nbsp;Social Media Ad Placements, Commercials, Billboard Advertising)</p></li>
<li><p>Creative Costs and Production Costs (e.g.&nbsp;Affiliate Marketing, Editing Software)</p></li>
<li><p>Technical Tools (e.g.&nbsp;CRM Software)</p></li>
<li><p>Content Creation and Digital Marketing (e.g.&nbsp;SEO, SEM)</p></li>
<li><p>In-Person Events (e.g.&nbsp;Hosted Events, Trade Shows, Travel Expenses)</p></li>
<li><p>Third-Party Professional Services (e.g.&nbsp;Strategy Consulting Fees)</p></li>
</ul></li>
</ul></li>
<li><p><strong>Return on Ad Spend</strong> <strong>(ROAS)</strong></p>
<p><span class="math display">\[
\mbox{ROAS} = \frac{\mbox{Sales Revenue}}{\mbox{Advertising Budget Spend}}
\]</span></p></li>
</ul>
</section>
<section id="sec-mark-custlift" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-custlift">Conversion Lift Tests</h2>
<ul>
<li><p>Also see</p>
<ul>
<li>Data Science &gt;&gt; <a href="https://ercbk.github.io/Data-Science-Notebook/qmd/algorithms-marketing.html" style="color: green">Algorithms, Marketing</a></li>
<li>Data Science &gt;&gt; <a href="https://ercbk.github.io/Data-Science-Notebook/qmd/business-plots.html" style="color: green">Business Plots</a></li>
</ul></li>
<li><p>RCTs on a customer sample that tries to understand the impact of an ad campaign by randomly showing it to one group of users, with-holding it from another, and looking for a difference in behaviour between the two groups over some predetermined period of time.</p>
<ul>
<li><span class="ribbon-highlight">Example</span>:
<ul>
<li>A typical ecommerce brand might want to understand whether their Facebook ads are driving sales that wouldn’t have happened anyway, and so they’d want to track purchases as a KPI in their lift test.</li>
</ul></li>
</ul></li>
<li><p>Gold standard of incrementality measurement</p>
<ul>
<li>Incrementality Tests also help with re-engagement strategies to highlight the optimal day, post-install, to re-engage users and to ensure the highest incremental lift from your marketing efforts</li>
</ul></li>
<li><p>Alternatives</p>
<ul>
<li>A/B tests
<ul>
<li>No way to measure incrementality</li>
<li>The difference seems to be semantics IMO.
<ul>
<li>With A/B, the control group gets a “different treatment” and with conversion lift tests, the control group gets no treatment</li>
</ul></li>
</ul></li>
<li>Brand Lift Tests
<ul>
<li>seek to measure a campaign’s impact on brand metrics, not conversions</li>
</ul></li>
<li>Geo-experiments (see below))
<ul>
<li>Capable of measuring incrementality. Viable alternative to lift tests</li>
</ul></li>
</ul></li>
<li><p>How do you not serve ads to an audience (i.e the control group), yet still “own” the ad real-estate?</p>
<ul>
<li>Methodologies:
<ul>
<li><u>Intent-to-treat (ITT)</u> – This method calculates the experiment results based on the initial treatment assignment and not on the treatment that was eventually received (meaning you mark each user for test/control in advance and do not rely on attribution data. You have the “intent” to treat them with ads / prevent them from seeing ads, but there’s no guarantee it will happen).</li>
<li><u>Ghost ads/bids</u> – This is another example of a randomly split audience, but this time it is done just before the ad is served. The ad is then withheld from the control group, simulating the process of showing the ad to the user, known as ad serving, without paying for placebo ads. This is a tactic mostly used by advertising networks carrying out their own incrementality tests.</li>
<li><u>Public service announcements (PSAs)</u> – These are in place to show ads to both the test and control group however, the control group is shown a general PSA while the test group is shown the variant. The behaviors of users in both groups are then compared to calculate incremental lift.</li>
</ul></li>
</ul></li>
<li><p><strong>Cost per Incremental Conversion (CPiP)</strong></p>
<ul>
<li>Metric used to determine whether the treatment’s effect (e.g incremental conversion) is enough to warrant implementing the treatment in production
<ul>
<li>Higher is worse</li>
</ul></li>
<li><span class="ribbon-highlight">Example</span>:
<ul>
<li>eCommerce brand spent $100k on their campaign.</li>
<li>They measured
<ul>
<li>7,500 sales from their campaign’s treatment group (both during and for some fixed time after the campaign)</li>
<li>5,000 sales from their campaign’s control group</li>
<li>7500 - 5000 = <strong>incremental sales</strong></li>
</ul></li>
<li>CPiP = $100,000 / (7500 - 5000) = $40</li>
</ul></li>
<li>If the CPiP &lt; Customer Lifetime Value (CTV) (See <a href="https://ercbk.github.io/Data-Science-Notebook/qmd/algorithms-marketing.html#sec-alg-mark-clv" style="color: green">Algorithms, Marketing &gt;&gt; Customer Lifetime Value</a>) and this margin is acceptable at which to acquire customers, then the treatment (e.g.&nbsp;ad campaign) can move to production</li>
</ul></li>
<li><p><strong>Incremental Return on Advertising Spend (iROAS)</strong></p>
<p><span class="math display">\[
\mbox{iROAS} = \frac{\mbox{Treatment Group Revenue} - \mbox{Control Group Revenue}}{\mbox{Treatment Spend}}
\]</span></p>
<ul>
<li>Less than 100% you can redistribute budgets to better-performing campaigns and channels</li>
<li>Equal to or higher than 100% you know you are not cannibalizing organic traffic and that your ads are effective</li>
</ul></li>
</ul>
</section>
<section id="sec-mark-geoexp" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-geoexp">Geo-Experiments</h2>
<ul>
<li>Packages
<ul>
<li><span style="color: #990000">{</span><a href="https://github.com/facebookincubator/GeoLift" style="color: #990000">GeoLift</a><span style="color: #990000">}</span> - Facebook package for end-to-end geo-experimental methodology based on Synthetic Control Methods used to measure the true incremental effect (Lift) of ad campaign.</li>
</ul></li>
<li>A quasi-experimental methodology where non-overlapping geographic regions (geos) are randomly assigned to a control or treatment group
<ul>
<li><span class="ribbon-highlight">Example</span>: ads are served only in the geos of the treatment group while users in geos of the control group won’t be exposed to the advert</li>
</ul></li>
<li>All the major ad networks/tracking platforms allow for targeting ads to the relevant level of location (neighbourhood, city, state, etc.)
<ul>
<li>Conversions are measured at a geo-level.</li>
</ul></li>
<li>Steps
<ol type="1">
<li>Decide geo-level based on market geography
<ul>
<li>country <span class="math inline">\(\rightarrow\)</span> states</li>
<li>state <span class="math inline">\(\rightarrow\)</span> zip codes, Designated Market Area (DMA)</li>
<li>Don’t select geos that are too small as people may travel across geo-boundaries and the volumes of conversions may be too low</li>
</ul></li>
<li>Perform a preliminary analysis of the geos
<ul>
<li>Determine factors that differ between geos that may influence the experiment</li>
<li>Find geos most similar to each other so the experiment isn’t biased even after randomization</li>
</ul></li>
<li>Assignment
<ul>
<li>Randomly assign treatment and contol to geos</li>
</ul></li>
<li>Analysis
<ul>
<li>Use difference in differences or synthetic controls to measure incremental conversions</li>
<li>Example DiD<br>
<a href="./_resources/Marketing.resources/0-7mG9DH1XOy4T3g9G.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="./_resources/Marketing.resources/0-7mG9DH1XOy4T3g9G.png" class="img-fluid" width="532"></a></li>
</ul></li>
</ol></li>
</ul>
</section>
<section id="sec-mark-long" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-long">Longitudinal Experiments</h2>
<ul>
<li>Notes from <a href="https://towardsdatascience.com/how-to-set-up-longitudinal-experiments-a-data-scientists-guide-59b7aa729d20">A Data Scientist’s Guide to Longitudinal Experiments for Personalization Programs</a></li>
<li>Longitudinal experiments offer distinct advantages in complex personalization scenarios. They enable a deeper understanding of the cumulative impact of personalized marketing strategies and help determine when to scale these efforts.</li>
<li><span class="ribbon-highlight">Example</span>: Bike Customization Business
<ul>
<li>Contrary to one-time grocery trips, typical shopper journeys at “AvidBikers” consists of a series of online shopping trips to get all parts needed to DIY bikes and upgrade biking equipments.
<ul>
<li>So the company launched a personalization program to send weekly best offerings and promotions to their loyal cyclist customer base</li>
</ul></li>
<li>The marketing data science team would like to understand both the individual campaign effectiveness and the overall program-level incrementality from combined personalized marketing strategies.
<ul>
<li>Program-level measurement results indicate the overall success of AvidBikers personalization program.</li>
<li>Campaign-level measurement tells us which specific personalization tactic (personalized offering or promo) is the winning strategy for which subset of the customer base.</li>
</ul></li>
<li>Two-Pronged approach
<ul>
<li>Study program-wide effects which refer to the impacts from running the personalization program, which sometimes consists of up to thousands of individual campaigns.</li>
<li>Study campaign-level impacts which refer to that of sending personalized weekly best offerings vs.&nbsp;promotions to most relevant customers.</li>
</ul></li>
<li>Test and control groups are created on both global level and campaign level.
<ul>
<li>Global (Program-wide)
<ul>
<li>The test group is the customer base who receives personalized offerings and promos when eligible</li>
<li>The control is carved out as “hold-out” group.</li>
</ul></li>
<li>Campaign
<ul>
<li>Within the global test group, we further carve out campaign-level test and control groups to measure impacts of different personalization strategies.</li>
</ul></li>
<li>Perform a statistical test to validate groups are balanced</li>
</ul></li>
<li>Issues
<ul>
<li>Dropout
<ul>
<li>Customer attrition likely has an uneven impact on test and control groups, creating uncontrolled differences that could not be attributed to the personalization treatment / interventions.</li>
<li>To address such bias, new customers are assigned into program-level and campaign level test and control groups, followed by a statistical test to validate groups are balanced.
<ul>
<li>I think this is probably fine. Mixed effects models handle group imbalance okay, but there will be a loss of power. (See <a href="https://ercbk.github.io/Data-Science-Notebook/qmd/mixed-effects-general.html#sec-me-gen-modeq" style="color: green">Mixed Effects, General &gt;&gt; Model Equation</a>)</li>
</ul></li>
<li>Perform a “longitudinal quality check” to ensure audience assignment is consistent week over week (?)
<ul>
<li>I’m guessing this a test to monitor group balance on a weekly basis.</li>
</ul></li>
<li>Also see
<ul>
<li><a href="https://ercbk.github.io/Data-Science-Notebook/qmd/missingness.html#sec-missing-misc" style="color: green">Missingness &gt;&gt; Misc</a> &gt;&gt; Missingness in RCT due to dropouts</li>
</ul></li>
</ul></li>
<li>Other issues such as cold-start, overlapping strategies, etc. could also arise.
<ul>
<li><a href="https://ercbk.github.io/Data-Science-Notebook/qmd/experiments-a_b-testing.html#sec-exp-ab-pb" style="color: green">Experiments, A/B Testing &gt;&gt; Potential Biases</a></li>
<li><a href="https://ercbk.github.io/Data-Science-Notebook/qmd/experiments-rct.html#sec-exp-rct-sbias" style="color: green">Experiements, RCT &gt;&gt; Sources of Bias</a></li>
<li><a href="https://ercbk.github.io/Data-Science-Notebook/qmd/experiments-planning.html#sec-exp-plan-misc" style="color: green">Experiments, Planning &gt;&gt; Misc</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-mark-chanatt" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-chanatt">Channel Attribution</h2>
<section id="sec-mark-chanatt-misc" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-chanatt-misc">Misc</h3>
<ul>
<li>Also see UTM parameters in Terms on how to use URLs to track different ad accounts.
<ul>
<li>When you start tracking the UTM parameters and tying it to the account creation, you can now measure the conversion rate from ad click to purchase.</li>
<li>The main KPI is now end-to-end customer acquisition cost, rather than cost per click.</li>
</ul></li>
<li>Model should reflect these characteristics
<ul>
<li>The concave shape of diminishing returns<br>
<a href="./_resources/Marketing.resources/1-Zus4VojzJJbIIFZ2rPqYJw.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="./_resources/Marketing.resources/1-Zus4VojzJJbIIFZ2rPqYJw.png" class="img-fluid" width="632"></a>
<ul>
<li>As the market becomes saturated by your ads, additional ad spend generates less return</li>
<li><code>sales ~ ln(spend)</code> and you’d have make sure you change the 0s to a really small number or add 1 , e.g y = ln(x+1).
<ul>
<li>By adding 1, zeroes will be zeros on the log-scale since log 1 = 0</li>
</ul></li>
</ul></li>
<li>Carryover Effect
<ul>
<li>The lag between the time a consumer is touched by an ad and the time a consumer converts because of the ad.</li>
<li>Adstock is a decaying function that describes the average carryover effect<br>
<a href="./_resources/Marketing.resources/1-Fmr_wpbh0SV7EHwZthBA4g.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="./_resources/Marketing.resources/1-Fmr_wpbh0SV7EHwZthBA4g.png" class="img-fluid" width="532"></a>
<ul>
<li>The advertising effect of this example channel was about 40% in the initial week, then decrease to 20% in the following week, and so on
<ul>
<li>Not sure how this “effect” is measured. Maybe it means a 40% increase in conversions during the initial week of the ad buy. Maybe this is measured experimentally. Maybe it’s something like a ratio of conversions after clicks on digital ads/paid search to total clicks on the ad.</li>
</ul></li>
<li>Calculate a “spend_with_adstock” variable<br>
<img src="./_resources/Marketing.resources/1-PzWaS2vmwbiVg60-B8_6uQ.png" class="img-fluid">
<ul>
<li>Decay rate is specific to an ad channel and business type
<ul>
<li>Online ads have a more immedicate effect since users are usually ready to buy</li>
<li>Offline ads have a longer delay since it takes time to respond</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li>Typically dealing with sparse data
<ul>
<li>There can be a big spike in spending due to a new launch but no consistent spending afterward.</li>
<li>For certain channels, the budget could be turned off for some time and back on due to market dynamics or business strategy changes.</li>
<li>In some cases, we can pool together smaller locations that are believed to behave similarly to each other and estimate them using a hierarchical Bayesian model (the same logic can be applied to similar channels)</li>
</ul></li>
<li>Issues
<ul>
<li>Self-selection/endogeneity
<ul>
<li><span class="ribbon-highlight">Example</span>: Paid Search
<ul>
<li>A user <em>already</em> has the brand she wants to purchase in mind and searches the brand name online. Then she clicked the paid search ad and made a purchase. This would incur ad spend, however, the purchase would not be incremental sequence of steps (i.e customer journey) because she would have purchased anyway. So the ad didn’t induce the purchase since the user was already ready to purchase before encountering the ad.</li>
</ul></li>
<li>Upper funnel channels can get less credit than downstream channels
<ul>
<li>e.g.&nbsp;A user saw an ad on TV first and wanted to make a purchase online. He then searched for the product on Google and bought it from the paid search ad. The model could attribute more credit to the search if not treated well.</li>
</ul></li>
<li>Solutions
<ul>
<li>Informative priors from reliable experimentation on channels with high selection bias to guide the model and prevent the model from being biased towards endogenous channels.</li>
<li>Instrumental variables to better control for the bias (although instrumental variables may be hard to find or construct)</li>
<li>Selection Bias Correction approach developed by Google (<a href="https://arxiv.org/pdf/1807.03292.pdf">Paper</a>).
<ul>
<li>Google team used DAGs of the search ad environment and derived a statistically principled method for bias correction</li>
<li>Adjusted for search queries to close backdoor paths.</li>
<li>After the adjustment, the coefficient for the search channel is much less than that from the naive model and is aligned with the result from the experimentations.</li>
</ul></li>
</ul></li>
</ul></li>
<li>Multi-Collinearity
<ul>
<li>e.g.&nbsp;Two channels might be launched together to reinforce each other or to support a product launch</li>
<li>Solutions: variable reduction techniques: PCA, ElasticNet, etc.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-mark-chanatt-unif" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-chanatt-unif">Unified Approach</h3>
<ul>
<li>Use experimentation results as priors for MMM and use MTA results to validate and calibrate MMM
<ul>
<li>Experiment examples: Conversion Lift Tests, Geo-Experiments, A/B Tests, RCTS, etc.</li>
<li>Use trustworthy priors obtained from experiments or external sources to inform a bayesian model
<ul>
<li>A bayesian model with time-varying coefficients can handle violatility of marketing effects (particularly for new companies)</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-mark-chanatt-mmm" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-chanatt-mmm">Marketing Mix Modeling (MMM)</h3>
<ul>
<li><code>Sales (or ) ~ Channel_Spend</code> (<code>+ Trend + Seasonality(s) + Campaigns + Events + Holidays + Weather +… etc.</code>)
<ul>
<li>Other outcome variables
<ul>
<li>KPI or google search volume or website visits or account sign-ups</li>
</ul></li>
<li>Other explanatory variables:
<ul>
<li>media cost for each channel</li>
<li>product pricing</li>
<li>economic indicators</li>
<li>synergistic effect between different media (i.e.&nbsp;interaction)</li>
<li>competitor activities</li>
</ul></li>
</ul></li>
<li>Better for measuring performance of offline traditional Out-of-Home (OOH) media like TV, radio and print which is unlike online advertising where we have access to metrics like clicks, clickthrough rate, impressions, etc.</li>
<li>Requires relatively large budgets and longer data history to have reliable reads. Sparse data and short data history could make the results biased and unstable
<ul>
<li>Typically requires at least 2 years of weekly data (longer is better) and a good volume of media spend.</li>
<li>For small data situations, reduce the number of features by combining smaller channels and prioritizing bigger channels</li>
</ul></li>
<li>Tends to underestimate upper funnel channels and overestimate lower funnel channels.</li>
<li>Less likely to get more granular level insights, and will not show the nuances of the user journey</li>
</ul>
</section>
<section id="sec-mark-chanatt-mta" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-chanatt-mta">Multi-Touch Attribution Modeling (MTA)</h3>
<ul>
<li>Also see
<ul>
<li><a href="https://ivylc.medium.com/multi-touch-attribution-the-fundamental-to-optimizing-customer-acquisition-7c77e4a49682">Multi-touch attribution: The fundamental to optimizing customer acquisition</a> (only skimmed, haven’t taken notes yet)</li>
</ul></li>
<li>Unlike MMM, it acknowledges that the customer journey is complex and customers may encounter more than one (or even all) of our marketing channel activities in their journey</li>
<li>Requires metrics like clicks, clickthrough rates, impressions, etc.
<ul>
<li>Therefore, only suited for digital media</li>
<li>MTA data aims to model the entire user ad journey. However, in reality, the real-world data can be partial and only includes part of the touch points due to tracking difficulty.</li>
<li>** MTA is also subjective to user data privacy initiatives, such as Apple no IDFA and Facebook no AMM. In the foreseeable future, Google will also join the force. Without user-level tracking data, MTA models cannot be built. **</li>
</ul></li>
<li>Most MTA methods utilize click data, not impressions, which tends to give more credit to more clicky channels, like search. This can also make the analysis biased.</li>
<li>Weighting is assigned to these channels based on their touchpoints to determine each channel’s contribution / involvement towards the sale
<ul>
<li>Weighting methods:
<ul>
<li><u>Last Click Attribution and First Click Attribution</u>
<ul>
<li>assigns 100% weighting to the last/first channel that was clicked on</li>
<li>Naive default model used on many analytics platforms
<ul>
<li>Google switched from this model to “data driven attribution” (see below) in Google Analytics 4 (GA4)</li>
</ul></li>
</ul></li>
<li><u>Time Decay</u> - weighting is distributed based on the recency of each channel prior to conversion. The most weighting will be given to the last channel prior to conversion (PPC). The least weighting is assigned to the first channel.</li>
<li><u>Position-Based</u> - the first and last channels each receive 40% of the weighting, with the remainder 20% distributed equally to the middle channels.
<ul>
<li>See https://support.google.com/analytics/answer/10596866?hl=en#zippy=%2Cin-this-article&nbsp; for explanations of other rules based models in GA4</li>
</ul></li>
<li><u>Data-Driven Attribution (DDA)</u> - weighting is assigned objectively by an algorithm based on the probability of conversion, given the touchpoints. Methods like
<ul>
<li>Google Search Ads 360 - Markov Chain, game-theory approaches using Shapley values</li>
<li>GA4
<ul>
<li>Analyze the available path data to develop conversion rate models for each of your conversion events</li>
<li>Use the conversion rate model predictions as input to an algorithm that attributes conversion credit to ad interactions</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-mark-chanatt-mca" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-chanatt-mca">Mobile Channel Attribution</h3>
<ul>
<li>Advertising Identifiers - helps mobile marketers attribute ad spend.
<ul>
<li>Google’s advertising identifier (GAID)</li>
<li><span class="ribbon-highlight">Example</span>:
<ul>
<li>When a company like Lyft or Kabam runs user acquisition campaigns to gain new mobile customers, a mobile measurement partner like Adjust, Singular, Kochava, or AppsFlyer can help them connect a click on an ad with an eventual app install on a specific device. That helps Lyft know that an ad worked, and that whatever ad network they used for it succeeded.</li>
<li>if the person who installed that app eventually signs up for an account and takes a ride share, Lyft knows where and how to attribute the results of that marketing effort, and connect it to the ad spend that initiated it. Even better, from Lyft’s perspective, it can use the IDFA to tell mobile ad networks essentially: I like users like this; go find me more.</li>
</ul></li>
<li>Apple’s <a href="https://developer.apple.com/documentation/storekit/skadnetwork">SKAdNetwork</a> <a href="./_resources/Marketing.resources/https-3A-2F-2Fspecials-images.jpg%3Ffit%3Dscale" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="./_resources/Marketing.resources/https-3A-2F-2Fspecials-images.jpg%3Ffit%3Dscale" class="img-fluid" width="532"></a>
<ul>
<li>Privacy-safe framework for mobile attribution</li>
<li>Allows advertisers to know which ads resulted in desired actions without revealing which specific devices — or which specific people — took those desired actions.</li>
<li>You go to an ad network like Vungle or AdColony or Chartboost — or Facebook or Google, for that matter — and kick off an ad campaign. They show your ads to potential new mobile customers, and when one clicks on it and downloads your app from the App Store, Apple itself will handle sending a cryptographically signed notification — a postback — to the ad network. That postback will not include any user or device-specific information, so while it will validate the conversion for marketing purposes, it won’t reveal any personal information of your new app user.</li>
<li>Can’t be used in Conversion Lift Tests
<ul>
<li>Postbacks require a ad campaign ID for the conversion to be attributed to, so it’s not possible to measure the conversion volume from a lift test’s control group (since the control group isn’t exposed to the ad)</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="sec-mark-sem" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-sem">Search Engine Marketing (SEM)</h2>
<ul>
<li><p>Marketing on search engines where you pay to place ads at the top so that the user sees your ads before the organic search results (e.g.&nbsp;Google, Bing, etc.)</p></li>
<li><p>Most SEM ads work on an auction system, where you have to place a bid on each of the search terms (can be millions of terms) relevant to your business and if you win a position in the auction(there are usually 2–3 SEM ads per search, or more based on your region and the search engine you are using), then you would pay the cost equal to your bid or lower depending on which auction system the search engine follows.</p></li>
<li><p><u>Auctions</u></p>
<ul>
<li>Types
<ul>
<li><u>First Price Auctions</u>: A model wherein the buyer pays exactly the price they’ve bid on any given advertising impression. (greater transparency)</li>
<li><u>Second-Price Auctions</u>: A model wherein the buyer pays $0.01 more than the second highest bid for an ad impression.</li>
</ul></li>
<li><span class="ribbon-highlight">Example</span>: 3 bidders
<ul>
<li>Bids
<ul>
<li>Bidder A $2.20</li>
<li>Bidder B $2.80</li>
<li>Bidder C $2.50 first-price auction: B wins</li>
<li>Clearing Price will be the same as the bid- $2.80</li>
<li>Second Price auction: B wins</li>
<li>Clearing Price = $0.01 + Decond-Highest Bid ($2.50) = $2.51</li>
<li>Reduction = $2.80 (Winning Bid) - $2.51 (Clearing Price) = $0.29</li>
</ul></li>
</ul></li>
</ul></li>
<li><p><u>Bid Shading</u></p>
<ul>
<li>Technique buyers use in first-price auctions in an attempt to avoid overpaying</li>
<li>Takes a maximum possible bid and tries to forecast the market value for a given impression, in order to determine the actual bid price to submit.
<ul>
<li>Outcome: bid price; model features: site, ad size, exchange and competitive dynamics</li>
<li>If win rates decrease, the algorithm raises the price they pay</li>
</ul></li>
<li>Some publishers (google, bing, etc.) use intelligent price floors to counteract bid shading</li>
</ul></li>
<li><p><u>Optimize bidding for value vs traffic volume characteristics of key words</u></p>
<ul>
<li>Sparsity Issues (i.e.&nbsp;Zero-Inflation)
<ul>
<li>Due to the long tail nature of the search terms (some search terms are more popular than some other obscure ones)</li>
<li>Due to the conversion ratio itself — not every click from these SEM ads converts to a purchase</li>
<li>What should the outcome variable be? (binary: conversion/no_conversion or numeric: bid value)</li>
</ul></li>
<li>Other considerations
<ul>
<li>How does the effect of a competitor’s bid change based on the type of auctioning method?</li>
<li>Seasonality?
<ul>
<li>Pre-corona vs post-corona?</li>
</ul></li>
<li>Is there an optimal level of investment?</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-mark-custseg" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-custseg">Customer Segmentation</h2>
<section id="sec-mark-custseg-misc" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-custseg-misc">Misc</h3>
<ul>
<li>Also see
<ul>
<li><a href="../qmd/marketing.html#sec-mark-custjourn" style="color: green">Customer Journey</a></li>
<li><a href="https://ercbk.github.io/Data-Science-Notebook/qmd/algorithms-product.html#sec-alg-prod-cj" style="color: green">Algorithms, Product &gt;&gt; Customer Journey</a></li>
</ul></li>
<li>Seeks to answer:
<ul>
<li>Who are the most valuable customers?</li>
<li>Where do they come from?</li>
<li>What do they look like?</li>
<li>What and how do they like to buy?</li>
</ul></li>
<li>Benefits
<ul>
<li>The company can achieve a higher return on ad spend with a smaller marketing budget, yielding a higher profit margin and more room for market expansion.</li>
<li>Increases marketing efficiency by helping to indicate which campaigns are more likely to succeed with certain groups of customers</li>
</ul></li>
</ul>
</section>
<section id="sec-mark-custseg-proc" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-custseg-proc">Process</h3>
<ul>
<li>Form marketing hypotheses based on cluster characteristics and test these hypotheses by varying campaigns based on the customer’s cluster membership.
<ul>
<li>e.g.&nbsp;Recommend a product they’re likely to purchase, a multi-buy discount, or on-boarding them on a loyalty scheme (e.g.&nbsp;rewards program)</li>
</ul></li>
<li>Once you know who your customers are and what their value is to your business, you can:
<ul>
<li>Personalize your products and services to better suit your customers’ needs</li>
<li>Create Communication Strategies tailored to each segment</li>
<li>Focus Customer Acquisition to more profitable customers with messages and offers more likely to resonate with them</li>
<li>Apply Price Optimization to match customer individual price sensitivity</li>
<li>Increase Customer Retention by offering discounts to customers that haven’t purchased in a long time</li>
<li>Enhance Customer Engagement by informing them about new products that are more relevant to them</li>
<li>Improve your chance to Cross-sell and Up-sell other products and services by reaching out for the right segment when they’re more likely to respond</li>
<li>Test which type of incentive a certain segment is more likely to respond to (e.g.&nbsp;pricing discounts, loyalty programs, product recommendation, etc.)</li>
</ul></li>
</ul>
</section>
<section id="sec-mark-custseg-rfm" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-custseg-rfm">RFM Analysis</h3>
<p><a href="./_resources/Marketing.resources/image.2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="./_resources/Marketing.resources/image.2.png" class="img-fluid" width="632"></a></p>
<ul>
<li>Recency, Frequency, and Monetary Value Analysis</li>
<li>The most profitable segments will have low recency, high frequency, and high monetary value.</li>
</ul>
<section id="sec-mark-custseg-rfm-dat" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="sec-mark-custseg-rfm-dat">Data</h4>
<ul>
<li>Just need a transactional database with client’s orders over time (at least 2.5 to 3 yrs of data to capture enough behavior variation).<br>
<a href="./_resources/Marketing.resources/image.3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="./_resources/Marketing.resources/image.3.png" class="img-fluid" width="632"></a>
<ul>
<li>time frame could be monthly or yearly or any other time frame required by the business</li>
</ul></li>
<li>Explicitly creates sub-groups based on how much each customer is contributing.<br>
<a href="./_resources/Marketing.resources/image.4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="./_resources/Marketing.resources/image.4.png" class="img-fluid" width="632"></a>
<ul>
<li><strong>Recency</strong> – How recently did the customer purchase?
<ul>
<li>Invoice date can be used to calculate the recency</li>
<li>Number of days since the last purchase</li>
</ul></li>
<li><strong>Frequency</strong> – How often do they purchase?
<ul>
<li>Invoice numbers can be used to calculate the frequency</li>
<li>Number of invoices per month</li>
</ul></li>
<li><strong>Monetary Value</strong> – How much do they spend?
<ul>
<li>Total price can be used to calculate the monetary value.</li>
<li>Total monetary value of all purchases in a month</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="sec-mark-custseg-rfm-mod" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="sec-mark-custseg-rfm-mod">Modeling</h4>
<ul>
<li>Also see
<ul>
<li><a href="https://ercbk.github.io/Data-Science-Notebook/qmd/algorithms-marketing.html#sec-alg-mark-clv" style="color: green">Algorithms, Marketing &gt;&gt; Customer Lifetime Value</a> &gt;&gt; BG/NBD Gamma-Gamma model</li>
<li>Video: Bizsci
<ul>
<li>lab-49-feature-engineering-customer-segmentation</li>
<li>lab-58-customer-lifetime-value-rfm-calc</li>
<li>python customer lifetime value, rfm + xgboost (<a href="https://www.youtube.com/watch?v=s-32u6XdY7c">youtube</a>)</li>
</ul></li>
</ul></li>
<li>Group into Quantiles
<ul>
<li>Process
<ul>
<li>For each RFM variable, rank customers based on values</li>
<li>For each customer, add up the ranks to get a RFM score</li>
<li>Bin each customer into a quantile based on their RFM score</li>
</ul></li>
<li>Issues
<ul>
<li>Correlation between RFM variables
<ul>
<li>e.g.&nbsp;Someone who bought a lot a long time ago could be in the same bin as someone who bought a little recently.</li>
</ul></li>
<li>Should look at the distribution of RFM scores. Grouping into a particular quantiling schema may not be informative</li>
</ul></li>
</ul></li>
<li>Clustering (k-means is popular)
<ul>
<li>Cluster Customer IDs based on Recency, Frequency, and Monetary Value variables
<ul>
<li>Add additional variables if relevant to helping you choose a market strategy</li>
<li>If you end up with too many variables for the amount of data you have, then perform PCA before clustering</li>
</ul></li>
</ul></li>
<li>Interpret clusters and create strategy for each cluster
<ul>
<li><p><span class="ribbon-highlight">Example</span><br>
<a href="./_resources/Marketing.resources/image.6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="./_resources/Marketing.resources/image.6.png" class="img-fluid" width="632"></a><a href="./_resources/Marketing.resources/image.5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="./_resources/Marketing.resources/image.5.png" class="img-fluid" width="632"></a></p>
<ul>
<li>Charts
<ul>
<li>Both charts have the same info, right shows the patterns better but you can’t read the values</li>
<li>RFM variables were standardized between 0 and 100 before clustering</li>
</ul></li>
<li>Cluster 0
<ul>
<li>Interpretation — Customers who have not made purchases recently</li>
<li>Strategy — Make offers to bring them back to purchasing</li>
</ul></li>
<li>Cluster 1
<ul>
<li>Interpretation — Customers who have a high monitory value</li>
<li>Strategy — Create a loyalty program so that they can continue spending more</li>
</ul></li>
<li>Cluster 2
<ul>
<li>Interpretation — Customers who have not made purchases recently</li>
<li>Strategy — Make offers to bring them back to purchasing</li>
</ul></li>
<li>Cluster 3
<ul>
<li>Interpretation — Customers who are likely to churn</li>
<li>Strategy — Retain them with exciting offers</li>
</ul></li>
<li>Cluster 4
<ul>
<li>Interpretation — Regular customers</li>
<li>Strategy — Create a loyalty program to keep them purchasing on a regular basis</li>
</ul></li>
</ul></li>
<li><p><span class="ribbon-highlight">Example</span></p>
<p><a href="_resources/Marketing.resources/custseg-clust-bar-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="_resources/Marketing.resources/custseg-clust-bar-1.png" class="img-fluid" width="354"></a></p>
<p><a href="_resources/Marketing.resources/custseg-clust-mark-recom-1.webp" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="_resources/Marketing.resources/custseg-clust-mark-recom-1.webp" class="img-fluid" width="632"></a></p>
<ul>
<li>From <a href="https://towardsdatascience.com/a-data-science-project-with-chatgpt-code-interpreter-e9beb8705dac">A Data Science Project with ChatGPT Code Interpreter</a></li>
</ul></li>
<li><p><span class="ribbon-highlight">Example</span>: Categorizing by Rank</p>
<ul>
<li>From <a href="https://towardsdatascience.com/how-to-create-an-rfm-model-in-bigquery-5ca7bbbd4687">How to Create an RFM Model in BigQuery</a> (See article for code)</li>
<li>Advocates
<ul>
<li><p>Who They Are: Recent, frequent shoppers with high spending.</p></li>
<li><p>Strategy: Ideal for exclusive rewards and further engagement opportunities.</p></li>
<li><p>Ranks</p>
<pre><code>recency_rank between 4 and 5 
and frequency_rank between 4 and 5 
and monetary_rank between 4 and 5 </code></pre></li>
</ul></li>
<li>Loyalists
<ul>
<li><p>Who They Are: Customers showing strong recent engagement and significant spending.</p></li>
<li><p>Strategy: Deserve recognition and retention efforts, perfect for loyalty programs.</p></li>
<li><p>Ranks</p>
<pre><code>recency_rank between 3 and 5 
and frequency_rank between 3 and 5 
and monetary_rank between 3 and 5 </code></pre></li>
</ul></li>
<li>Promising
<ul>
<li><p>Who They Are: Recent customers showing potential but with lower frequency and spend.</p></li>
<li><p>Strategy: Need encouragement to boost their shopping frequency and spending.</p></li>
<li><p>Ranks</p>
<pre><code>recency_rank between 3 and 5 
and frequency_rank between 2 and 5 
and monetary_rank between 1 and 5 </code></pre></li>
</ul></li>
<li>Need Attention
<ul>
<li><p>Who They Are: Customers who have made a recent purchase but have only done so once.</p></li>
<li><p>Strategy: An opportunity to introduce these typically new customers to the brand and products, encouraging deeper engagement.</p></li>
<li><p>Ranks</p>
<pre><code>recency_rank between 3 and 5 
and frequency_rank = 1
and monetary_rank between 1 and 5</code></pre></li>
</ul></li>
<li>Losing High Value
<ul>
<li><p>Who They Are: Once frequent and high-spending customers now showing decreased recency.</p></li>
<li><p>Strategy: Require personalized re-engagement strategies and incentives to rekindle their interest and loyalty.</p></li>
<li><p>Ranks</p>
<pre><code>recency_rank between 2 and 3 
and frequency_rank between 1 and 5 
and monetary_rank between 3 and 5 </code></pre></li>
</ul></li>
<li>Losing Low Value
<ul>
<li><p>Who They Are: Customers similar to the high-value segment but with overall lower spending.</p></li>
<li><p>Strategy: Also in need of re-engagement efforts, though strategies may differ given their lower value.</p></li>
<li><p>Ranks</p>
<pre><code>recency_rank between 2 and 3 
and frequency_rank between 1 and 5
and monetary_rank between 1 and 3</code></pre></li>
</ul></li>
<li>Lost
<ul>
<li><p>Who They Are: Customers who have not made a purchase in a long time, making them unlikely to return.</p></li>
<li><p>Strategy: Focus efforts on more engaged segments, as re-engaging lost customers may not be resource-efficient.</p></li>
<li><p>Rank</p>
<pre><code>recency_rank = 1 </code></pre></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="sec-mark-custseg-behav" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-custseg-behav">Behavioral Segmentation</h3>
<ul>
<li>Tries to understand how customers interact with your product or website</li>
<li>Misc
<ul>
<li>Also see
<ul>
<li><a href="../qmd/marketing.html#sec-mark-custjourn" style="color: green">Customer Journey</a></li>
<li><a href="../qmd/product-development-general.html#sec-proddev-gen-behdat" style="color: green">Product Development, General &gt;&gt; Behavioral Data</a></li>
</ul></li>
</ul></li>
<li>Data
<ul>
<li>Demographics: location, age, gender, and income</li>
<li>Touchpoints (see Terms): view-through, click-through, the time between each action, etc
<ul>
<li>If a user sees an ad on Instagram and quickly swipes over it, that probably indicates they are not very interested in it.</li>
<li>Often impacted by advertisers’ programmatic push notifications</li>
</ul></li>
<li>Company Website Navigation: visiting behaviors provide enlightening ideas about what a visitor is truly looking for and how they like to shop (See Customer Journey)</li>
<li>Purchasing: what a user buys, their purchasing frequency and timing, purchasing price and discounts, etc.</li>
<li>Social media network: Is there an influencer within a customer’s network? (see bkmks &gt;&gt; Network Analysis)</li>
<li><span class="ribbon-highlight">Example</span>: Telecommunications<br>
<a href="./_resources/Marketing.resources/image.7.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="./_resources/Marketing.resources/image.7.png" class="img-fluid" width="632"></a></li>
</ul></li>
<li>Cluster the data and interpret the clusters
<ul>
<li>Example using the telecommunications data above
<ul>
<li>The green cluster (aka segment) is Digitally engaged customers.
<ul>
<li>A market strategy could be to create a digital loyalty card and reward them based on the use of digital services. This will in turn also increase revenue for the company.</li>
</ul></li>
<li>The blue cluster is moderately engaged with low tenure.
<ul>
<li>A market strategy could be to offer discounts and convert them into long-term contracts.</li>
</ul></li>
<li>The red cluster is basic customers with only phone service.
<ul>
<li>A market strategy could be to educate them about the advantages of digital services and then upsell digital products.</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="sec-mark-custjourn" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-custjourn">Customer Journey</h2>
<p><a href="./_resources/Marketing.resources/image.1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="./_resources/Marketing.resources/image.1.png" class="img-fluid" width="632"></a><br>
<a href="./_resources/Marketing.resources/image.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="./_resources/Marketing.resources/image.png" class="img-fluid" width="632"></a></p>
<ul>
<li>Top Figure: Typical SaaS User Journey</li>
<li>Bottom Figure: General User Journey
<ul>
<li>Area of the rectangle represents the amount of customers that haven’t dropped off and remain the funnel</li>
<li>The red arrow represents customers that drop off and don’t convert</li>
<li>The start of the arrow show the section of the rectangle that represents the amount customer that drop off from on point to the next.</li>
</ul></li>
<li>Misc
<ul>
<li>Also see
<ul>
<li><a href="../qmd/product-development-general.html#sec-proddev-gen-convfun" style="color: green">Product Development, General &gt;&gt; Conversion Funnel</a></li>
<li><a href="../qmd/product-development-kpis.html#sec-proddev-kpis-lmon-grow" style="color: green">Product Development, KPIs &gt;&gt; Lifecycle-based Monitoring &gt;&gt; Growth Stage</a></li>
<li><a href="https://ercbk.github.io/Data-Science-Notebook/qmd/algorithms-product.html#sec-alg-prod-cj" style="color: green">Algorithms, Product &gt;&gt; Customer Journey</a> and <a href="https://ercbk.github.io/Data-Science-Notebook/qmd/algorithms-product.html#sec-alg-prod-convfun" style="color: green">Conversion Funnel</a></li>
</ul></li>
</ul></li>
<li>Pre Sale
<ul>
<li>When potential customers are in the “consideration” phase and researching a product, AI will target ads at them and can help guide their search
<ul>
<li>Determine which customers are most likely to be persuadable and, on the basis of their browsing histories, choose products to show them</li>
</ul></li>
<li>Use extremely detailed data on individuals, including real-time geolocation data, to create highly personalized product or service offers</li>
</ul></li>
<li>During Sale
<ul>
<li>Upselling and cross-selling and can reduce the likelihood that customers will abandon their digital shopping carts
<ul>
<li>After a customer fills a cart, AI bots can provide a motivating testimonial to help close the sale—such as “Great purchase! James from Vermont bought the same mattress.”</li>
</ul></li>
</ul></li>
<li>Post sale
<ul>
<li>AI-enabled service agents (chatbots) triage customers’ requests—and are able to deal with fluctuating volumes of service requests better than human agents are</li>
<li>Can handle simple queries about, say, delivery time or scheduling an appointment and can escalate more-complex issues to a human agent</li>
</ul></li>
</ul>
</section>
<section id="sec-mark-wkflw" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="sec-mark-wkflw">Workflow</h2>
<section id="sec-mark-wkflw-icp" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-wkflw-icp">Find the Ideal Customer Profile (ICP) and Target Them</h3>
<p><a href="./_resources/Marketing.resources/image.8.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="./_resources/Marketing.resources/image.8.png" class="img-fluid" width="532"></a></p>
<ul>
<li><p>Notes from <a href="https://towardsdatascience.com/a-complete-guide-to-data-driven-customer-acquisition-f0f1708b328">article</a></p></li>
<li><p>Customer Long Term Value</p>
<p><span class="math display">\[
\mbox{Customer's long-term value} = \mbox{Revenue from the customer's repeated purchase} - \mbox{customer's acquisition cost}
\]</span></p></li>
<li><p><u>Segment in Negative, Low-Value, Medium-Value, and High Value cohorts</u></p>
<ul>
<li>See <a href="../qmd/marketing.html#sec-mark-custseg-rfm" style="color: green">Customer Segmentation &gt;&gt; RFM Analysis</a></li>
<li>Alternatively, based on its sales and marketing attribution systems, the brand can calculate one-year revenue and acquisition costs for each customer (or visitor that doesn’t convert). With that, the brand quickly gets each customer’s value and decides who is worth its marketing budget.</li>
<li>The split between medium-value segment and high-value segment typically follows the 80/20 rule</li>
</ul></li>
<li><p><u>The High-Value segment can be further segmented into three smaller cohorts using pca or clustering algorithms.</u></p>
<ul>
<li>See <a href="../qmd/marketing.html#sec-mark-custseg-behav" style="color: green">Customer Segmentation &gt;&gt; Behaviorial Segmentation</a></li>
<li>The customer data used to cluster can include: interactions with marketing campaigns, browsing history, purchase history, records of using coupons, etc.</li>
<li>Domain knowledge is usually required to meaningfully label these cohorts and develop marketing plans based on the cluster attributes</li>
<li><span class="ribbon-highlight">Examples</span>
<ul>
<li>Cohort 1 likes to buy the latest model, cohort 2 prefers to buy with discounts, and cohort 3 often makes purchases as gifts</li>
<li>Cohort 1 reacts positively to campaigns about cool geeky features. On the other hand, cohort 2 engages more with campaigns spotlighting the practical benefits of using a new gadget.</li>
<li>Cohort 1 trusts YouTubers who talk about the latest and greatest tech products and make purchases after watching unboxing videos. Cohort 2 likes to shop at Costco and buy gadgets at a discount
<ul>
<li>Partnering with tech influencers helps the company attract cohort 1 while working with wholesale stores speeds up selling to cohort 2.</li>
</ul></li>
</ul></li>
</ul></li>
<li><p><u>Use experimentation on High-Value cohorts to test which acquisition/marketing campaigns have high ROAS.</u><br>
<a href="./_resources/Marketing.resources/image.9.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="./_resources/Marketing.resources/image.9.png" class="img-fluid" width="632"></a></p>
<ul>
<li>For cohort 3, campaign A seems to have more success than campaign B</li>
</ul></li>
<li><p>Future campaigns can now target high value cohorts with greater conversion and less expenditure.</p></li>
</ul>
</section>
<section id="sec-mark-wkflw-pits" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-wkflw-pits">Potential Pitfalls</h3>
<ul>
<li><u>Make sure the metric fits the business question</u>
<ul>
<li><span class="ribbon-highlight">Example</span>: Churn
<ul>
<li>Also see <a href="https://ercbk.github.io/Data-Science-Notebook/qmd/algorithms-marketing.html#sec-alg-mark-churn" style="color: green">Algorithms, Marketing &gt;&gt; Churn</a></li>
<li>Don’t model who was most likely to leave, they should have asked who could best be persuaded to stay — in other words, which customers considering jumping ship would be most likely to respond to a promotion.
<ul>
<li>i.e.&nbsp;Swing Customers - like politicians looking for swing voters because they are persuadable.</li>
</ul></li>
<li>If you model the wrong objective, you can squander money on swaths of customers who were going to defect anyway and underinvest in customers they should have doubled down on.
<ul>
<li>Think this has to be 2 stages
<ul>
<li>Filter data before promotions over some window <span class="math inline">\(\rightarrow\)</span> model traditional churn <span class="math inline">\(\rightarrow\)</span> filter data after promotion <span class="math inline">\(\rightarrow\)</span> label which likely churns left and which ones didn’t <span class="math inline">\(\rightarrow\)</span> model churn with new churn labels using data after promotion because you want probability of churn given promotion</li>
</ul></li>
<li>So you’d have 2 models: 1 to identify churners and 1 to identify swing customers from churners</li>
<li>Does a lift model help here?</li>
</ul></li>
</ul></li>
<li><span class="ribbon-highlight">Example</span>: Increasing user spend for a video game
<ul>
<li>Finding features that increase time spent playing doesn’t efficiently raise revenue or maybe not at all if most of your players play for free.
<ul>
<li>e.g.&nbsp;Increasing my time spent playing FOE doesn’t increase FOE’s revenue since I don’t pay for shit on that game.</li>
</ul></li>
<li>Guessing there’s a decent correlation between weekly total_time_spent_playing and overall revenue and they thought they could increase revenue by increasing total time_spent_playing. They should have been looking at correlations between features and spend_per_customer.
<ul>
<li>Maybe just filter top spenders and see which features they prefer (i.e.&nbsp;correlated to)</li>
</ul></li>
</ul></li>
</ul></li>
<li><u>Make sure when you increase the accuracy of a model, it doesn’t hurt the bottom line due to a bad tradeoff</u>
<ul>
<li>Consider the consumer goods company whose data scientists proudly announced that they’d increased the accuracy of a new sales-volume forecasting system, reducing the error rate from 25% to 17%. Unfortunately, in improving the system’s overall accuracy, they increased its precision with low-margin products while reducing its accuracy with high-margin products. Because the cost of underestimating demand for the high-margin offerings substantially outweighed the value of correctly forecasting demand for the low-margin ones, profits fell when the company implemented the new, “more accurate” system.</li>
</ul></li>
<li><u>Determine the optimal granularity of predictions</u>
<ul>
<li>Consider a marketing team deciding how to allocate its ad dollars on keyword searches on Google and Amazon. The data science team’s current AI can predict the lifetime value of customers acquired through those channels. However, the marketers might get a higher return on ad dollars by using more-granular predictions about customer lifetime value per keyword per channel.</li>
</ul></li>
</ul>
</section>
<section id="sec-mark-wkflw-refbizq" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="sec-mark-wkflw-refbizq">Refine the Business Question</h3>
<ul>
<li>When defining the problem, managers should get down to what we call the atomic level — the most granular level at which it’s possible to make a decision or undertake an intervention.</li>
<li>A good business question captures the full impact of the decision on the Profit and Loss (P&amp;L), recognizes any trade-offs, and spells out what a meaningful improvement might look like.</li>
<li><u>Gradaute from an extremely vague question to a more finely grained question</u>
<ol type="1">
<li>“How do we reduce churn?”</li>
<li>“How can we best allocate our budget for retention promotions to reduce churn?”
<ul>
<li>Has the retention budget been set, or is that something we need to decide?</li>
<li>What do we mean by “allocate”?</li>
<li>Are we allocating across different retention campaigns?</li>
</ul></li>
<li>“Given a budget of $x million, which customers should we target with a retention campaign?”</li>
</ol></li>
<li><u>Define Missed Opportunity metrics</u>
<ul>
<li>Identify sources of waste and missed opportunities
<ul>
<li>Waste example: targeting a likely-to-churn customer with a promotion that is not persuadable</li>
<li>Missed opportunity example: not targeting a likely-to-churn customer with a promotion that is persuadable</li>
</ul></li>
<li>Compare the distribution of success versus failure to quantify waste and missed opportunities.</li>
<li>Measure
<ul>
<li>For difficult to quantify situations use aggregate data
<ul>
<li>Example of an approach for churn model example using aggregated data
<ul>
<li>customers who received promotion: what’s the cost of the promotion incentive relative to the incremental lifetime value
<ul>
<li>difference or ratio?</li>
</ul></li>
<li>customers who didn’t receive promotion: what’s the lost profit associated with the nonrenewal of their contracts</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><u>Determine the cause of waste and missed opportunities</u>
<ul>
<li>In an ideal world, what knowledge would you have that would fully eliminate waste and missed opportunities? Is your current prediction a good proxy for that?
<ul>
<li>In churn example, rather than the basic churn/no churn model, focusing on persuadability would have led to great improvements.</li>
</ul></li>
<li>Does the output of your AI fully align with the business objective?
<ul>
<li>Churn example: A persuadable user with low expected profitability should have a lower priority than a persuadable user with high expected profitability.
<ul>
<li>Additional factor that further optimizes the solution to the refined business question</li>
</ul></li>
</ul></li>
<li>How much are we deviating from the business results we want, given that the AI’s output isn’t completely accurate?
<ul>
<li>Quantifying the errors of your model</li>
<li>Churn example: the cost of sending a retention promotion to a nonpersuadable customer (waste) is lower than the cost of losing a high-value customer who could have been persuaded by the offer (missed opportunity). Therefore, the company will be more profitable if its AI system focuses on not missing persuadable customers, even if that increases the risk of falsely identifying some customers as being receptive to the retention offer.</li>
</ul></li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../qmd/manufacturing.html" class="pagination-link" aria-label="Manufacturing">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Manufacturing</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../qmd/meteorology.html" class="pagination-link" aria-label="Meteorology">
        <span class="nav-page-text">Meteorology</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../LICENSE.html">
<p>Creative Commons Attribution-NonCommercial 4.0 International Public License</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","loop":false,"selector":".lightbox","openEffect":"zoom","descPosition":"bottom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>